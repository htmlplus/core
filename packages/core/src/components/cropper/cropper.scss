@import '../../../node_modules/cropperjs/dist/cropper.min.css';
@import 'reset';
@import 'cropper.variables'; 

:host {

  /**
  * @prop --plus-cropper-backdrop-color  : TODO.
  * @prop --plus-cropper-backdrop-opacity: TODO.

  * @prop --plus-cropper-guides-color    : TODO.
  * @prop --plus-cropper-guides-opacity  : TODO.
  * @prop --plus-cropper-guides-style    : TODO.
  * @prop --plus-cropper-guides-weight    : TODO.

  * @prop --plus-cropper-viewport-color  : TODO.
  * @prop --plus-cropper-viewport-opacity: TODO.
  * @prop --plus-cropper-viewport-style  : TODO.
  * @prop --plus-cropper-viewport-weight  : TODO.
  */

  --plus-cropper-backdrop-color   : #{$cropper-backdrop-color};
  --plus-cropper-backdrop-opacity : #{$cropper-backdrop-opacity};
  
  --plus-cropper-guides-color     : #{$cropper-guides-color};
  --plus-cropper-guides-opacity   : #{$cropper-guides-opacity};
  --plus-cropper-guides-style     : #{$cropper-guides-style};
  --plus-cropper-guides-weight     : #{$cropper-guides-weight};

  --plus-cropper-indicator-color  : #{$cropper-indicator-color};
  --plus-cropper-indicator-opacity: #{$cropper-indicator-opacity};
  --plus-cropper-indicator-size   : #{$cropper-indicator-size};
  --plus-cropper-indicator-weight : #{$cropper-indicator-weight};

  --plus-cropper-resizer-color    : #{$cropper-resizer-color};
  --plus-cropper-resizer-offset   : #{$cropper-resizer-offset};
  --plus-cropper-resizer-opacity  : #{$cropper-resizer-opacity};
  --plus-cropper-resizer-size     : #{$cropper-resizer-size};
  --plus-cropper-resizer-weight   : #{$cropper-resizer-weight};
  
  --plus-cropper-viewport-color   : #{$cropper-viewport-color};
  --plus-cropper-viewport-opacity : #{$cropper-viewport-opacity};
  --plus-cropper-viewport-style   : #{$cropper-viewport-style};
  --plus-cropper-viewport-weight   : #{$cropper-viewport-weight};
}

:host {
  display: block;
}

.wrapper {
  width: 100%;
  height: 100%;
}

.image {
  display: block;
  max-width: 100%;
}

.cropper-modal {
  background-color: var(--plus-cropper-backdrop-color);
  opacity: var(--plus-cropper-backdrop-opacity);
}

.cropper-line {
  display: none;
}

.resizer-main {
  .cropper-point.point-ne,
  .cropper-point.point-nw,
  .cropper-point.point-sw,
  .cropper-point.point-se {
    display: none;
  }
}

.resizer-edge {
  .cropper-point.point-e,
  .cropper-point.point-n,
  .cropper-point.point-w,
  .cropper-point.point-s {
    display: none;
  }
}

.viewport-round {
  .cropper-face,
  .cropper-view-box,
  .cropper-view-box::after {
    border-radius: 50%;
  }
  .cropper-dashed {
    &.dashed-h {
      width: calc(92.5% - var(--plus-cropper-guides-weight));
    }
    &.dashed-v {
      height: calc(92.5% - var(--plus-cropper-guides-weight));
    }
  }
  .cropper-point { 
    &.point-ne {
      top: calc(14.64466% + var(--plus-cropper-viewport-weight) / 2);
      right: calc(14.64466% + var(--plus-cropper-viewport-weight) / 2);
    }
    &.point-nw {
      top: calc(14.64466% + var(--plus-cropper-viewport-weight) / 2);
      left: calc(14.64466% + var(--plus-cropper-viewport-weight) / 2);
    }
    &.point-sw {
      bottom: calc(14.64466% + var(--plus-cropper-viewport-weight) / 2);
      left: calc(14.64466% + var(--plus-cropper-viewport-weight) / 2);
    }
    &.point-se {
      right: calc(14.64466% + var(--plus-cropper-viewport-weight) / 2);
      bottom: calc(14.64466% + var(--plus-cropper-viewport-weight) / 2);
    }
  }
}

.cropper-dashed {
  border-color: var(--plus-cropper-guides-color);
  border-style: var(--plus-cropper-guides-style);
  opacity : var(--plus-cropper-guides-opacity);
  &.dashed-h {
    left: 50%;
    transform: translateX(-50%);
    border-top-width: var(--plus-cropper-guides-weight);
    border-bottom-width: var(--plus-cropper-guides-weight);
  }
  &.dashed-v {
    top: 50%;
    transform: translateY(-50%);
    border-left-width: var(--plus-cropper-guides-weight);
    border-right-width: var(--plus-cropper-guides-weight);
  }
}

.cropper-view-box {
  outline: none;
  position: relative;
  &::after {
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border-style: var(--plus-cropper-viewport-style);
    border-color: var(--plus-cropper-viewport-color);
    border-width: var(--plus-cropper-viewport-weight);
    opacity : var(--plus-cropper-viewport-opacity);
  }
}

.cropper-point {
  &[class*="point-"] {
    --plus-cropper-resizer-offset-negative: calc((50% + var(--plus-cropper-resizer-offset)) * -1);
    --plus-cropper-resizer-offset-positive: calc((50% + var(--plus-cropper-resizer-offset)) * +1);
    margin: 0;
    height: var(--plus-cropper-resizer-size);
    width: var(--plus-cropper-resizer-size);
    opacity: var(--plus-cropper-resizer-opacity);
    background-color: var(--plus-cropper-resizer-color);
    &:before {
      content: none;
    }
  }
  &.point-e {
    right: 0;
    transform: translate(var(--plus-cropper-resizer-offset-positive), -50%);
  }
  &.point-n {
    top: 0;
    transform: translate(-50%, var(--plus-cropper-resizer-offset-negative));
  }
  &.point-w {
    left: 0;
    transform: translate(var(--plus-cropper-resizer-offset-negative), -50%);
  }
  &.point-s {
    bottom: 0;
    transform: translate(-50%, var(--plus-cropper-resizer-offset-positive));
  }
  &.point-ne {
    top: 0;
    right: 0;
    transform: translate(var(--plus-cropper-resizer-offset-positive), var(--plus-cropper-resizer-offset-negative));
  }
  &.point-nw {
    top: 0;
    left: 0;
    transform: translate(var(--plus-cropper-resizer-offset-negative), var(--plus-cropper-resizer-offset-negative));
  }
  &.point-sw {
    bottom: 0;
    left: 0;
    transform: translate(var(--plus-cropper-resizer-offset-negative), var(--plus-cropper-resizer-offset-positive));
  }
  &.point-se {
    right: 0;
    bottom: 0;
    transform: translate(var(--plus-cropper-resizer-offset-positive), var(--plus-cropper-resizer-offset-positive));
  }
}

.resizer-shape-round .cropper-point[class*="point-"] {
  border-radius: 50%;
}

.cropper-center {
  opacity: var(--plus-cropper-indicator-opacity);
  &:before {
    background-color: var(--plus-cropper-indicator-color);
    top: calc(var(--plus-cropper-indicator-weight) / 2 * -1);
    left: calc(var(--plus-cropper-indicator-size) / 2 * -1);
    height: var(--plus-cropper-indicator-weight);
    width: var(--plus-cropper-indicator-size);
  }
  &:after {
    background-color: var(--plus-cropper-indicator-color);
    top: calc(var(--plus-cropper-indicator-size) / 2 * -1);
    left: calc(var(--plus-cropper-indicator-weight) / 2 * -1);
    height: var(--plus-cropper-indicator-size);
    width: var(--plus-cropper-indicator-weight);
  }
}





.resizer-shape-line .cropper-point[class*="point-"] {
  background-color: transparent;
  border-style: solid;
  border-color: var(--plus-cropper-resizer-color);
  border-width: var(--plus-cropper-resizer-weight);
  &.point-e {
    border-top: none;
    border-bottom: none;
    border-left: none;
  }
  &.point-n {
    border-right: none;
    border-bottom: none;
    border-left: none;
  }
  &.point-w {
    border-top: none;
    border-right: none;
    border-bottom: none;
  }
  &.point-s {
    border-top: none;
    border-right: none;
    border-left: none;
  }
  &.point-ne {
    border-bottom: none;
    border-left: none;
  }
  &.point-nw {
    border-right: none;
    border-bottom: none;
  }
  &.point-sw {
    border-top: none;
    border-right: none;
  }
  &.point-se {
    border-top: none;
    border-left: none;
  }
}