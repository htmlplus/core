{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar _jsxFileName = \"C:\\\\projects\\\\mine\\\\htmlplus\\\\core\\\\packages\\\\docs\\\\src\\\\components\\\\sidebar\\\\sidebar.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useMemo, useState } from 'react';\nimport { FrameworkSelector, Link, Text } from 'components';\nimport { useRouter } from 'hooks';\nimport { Utils } from 'utils';\nexport const Sidebar = ({\n  items = []\n}) => {\n  _s();\n\n  const router = useRouter();\n  const {\n    0: current,\n    1: setCurrent\n  } = useState([]);\n  const actives = useMemo(() => {\n    const run = (input, ...parent) => {\n      if (Array.isArray(input)) {\n        let result = [];\n        input.map(item => {\n          const items = run(item, ...parent);\n          if (items.length) result = items;\n        });\n        return result;\n      } else if (input.items) {\n        return run(input.items, input, ...parent);\n      } else {\n        var _input$route, _input$route2, _input$route3;\n\n        if (!((_input$route = input.route) === null || _input$route === void 0 ? void 0 : _input$route.to)) return [];\n        const path = router.path((_input$route2 = input.route) === null || _input$route2 === void 0 ? void 0 : _input$route2.to, (_input$route3 = input.route) === null || _input$route3 === void 0 ? void 0 : _input$route3.params);\n        if (window.location.pathname.startsWith(path)) return [input, ...parent];\n        return [];\n      }\n    };\n\n    const result = run(items, null).filter(item => item);\n    setCurrent(result);\n    return result;\n  }, [items, router.location.path]);\n\n  const isActive = item => actives.some(active => item === active);\n\n  const isExpand = parent => {\n    if (!parent) return true;\n    return current.some(item => item === parent);\n  };\n\n  const toggle = (item, ...parents) => {\n    const indexOf = current.findIndex(x => x === item);\n\n    if (indexOf !== -1) {\n      setCurrent([...current.slice(indexOf + 1)]);\n    } else {\n      setCurrent([item, ...parents]);\n    }\n  };\n\n  const menu = (items, level = 0, ...parents) => {\n    return __jsx(\"ul\", {\n      className: Utils.classes({\n        ['sidebar__menu']: true,\n        [`sidebar__menu--level-${level}`]: true,\n        ['sidebar__menu--collapsed']: !isExpand(parents[0])\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, items.map(item => __jsx(\"li\", {\n      key: item.title,\n      className: Utils.classes({\n        'sidebar__menu__item': true,\n        'sidebar__menu__item--active': isActive(item)\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, __jsx(Text, {\n      size: \"body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, item.route ? __jsx(Link, _extends({}, item.route, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 29\n      }\n    }), item.title) : __jsx(\"div\", {\n      onClick: () => toggle(item, ...parents),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 73\n      }\n    }, item.title)), item.items && item.items.length && menu(item.items, level + 1, item, ...parents))));\n  };\n\n  const classes = Utils.classes({\n    'sidebar': true\n  });\n  return __jsx(\"div\", {\n    className: classes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"framework-selector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, __jsx(FrameworkSelector, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  })), menu(items));\n};\n\n_s(Sidebar, \"iXinJxfEj3MGB4sDJ9ThAwvRkvI=\", false, function () {\n  return [useRouter];\n});\n\n_c = Sidebar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Sidebar\");","map":{"version":3,"sources":["C:/projects/mine/htmlplus/core/packages/docs/src/components/sidebar/sidebar.tsx"],"names":["React","useMemo","useState","FrameworkSelector","Link","Text","useRouter","Utils","Sidebar","items","router","current","setCurrent","actives","run","input","parent","Array","isArray","result","map","item","length","route","to","path","params","window","location","pathname","startsWith","filter","isActive","some","active","isExpand","toggle","parents","indexOf","findIndex","x","slice","menu","level","classes","title"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,OAAhB,EAAyBC,QAAzB,QAAyC,OAAzC;AACA,SAASC,iBAAT,EAA4BC,IAA5B,EAAkCC,IAAlC,QAA8C,YAA9C;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,KAAT,QAAsB,OAAtB;AAGA,OAAO,MAAMC,OAA+B,GAAG,CAAC;AAAEC,EAAAA,KAAK,GAAG;AAAV,CAAD,KAAoB;AAAA;;AAEjE,QAAMC,MAAM,GAAGJ,SAAS,EAAxB;AAEA,QAAM;AAAA,OAACK,OAAD;AAAA,OAAUC;AAAV,MAAwBV,QAAQ,CAAC,EAAD,CAAtC;AAEA,QAAMW,OAAO,GAAGZ,OAAO,CACrB,MAAM;AAEJ,UAAMa,GAAG,GAAG,CAACC,KAAD,EAAQ,GAAGC,MAAX,KAAsB;AAEhC,UAAIC,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAJ,EAA0B;AAExB,YAAII,MAAM,GAAG,EAAb;AAEAJ,QAAAA,KAAK,CAACK,GAAN,CAAWC,IAAD,IAAU;AAElB,gBAAMZ,KAAK,GAAGK,GAAG,CAACO,IAAD,EAAO,GAAGL,MAAV,CAAjB;AAEA,cAAIP,KAAK,CAACa,MAAV,EAAkBH,MAAM,GAAGV,KAAT;AACnB,SALD;AAOA,eAAOU,MAAP;AACD,OAZD,MAaK,IAAIJ,KAAK,CAACN,KAAV,EAAiB;AAEpB,eAAOK,GAAG,CAACC,KAAK,CAACN,KAAP,EAAcM,KAAd,EAAqB,GAAGC,MAAxB,CAAV;AACD,OAHI,MAIA;AAAA;;AAEH,YAAI,kBAACD,KAAK,CAACQ,KAAP,iDAAC,aAAaC,EAAd,CAAJ,EAAsB,OAAO,EAAP;AAEtB,cAAMC,IAAI,GAAGf,MAAM,CAACe,IAAP,kBAAYV,KAAK,CAACQ,KAAlB,kDAAY,cAAaC,EAAzB,mBAA6BT,KAAK,CAACQ,KAAnC,kDAA6B,cAAaG,MAA1C,CAAb;AAEA,YAAIC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBC,UAAzB,CAAoCL,IAApC,CAAJ,EAA+C,OAAO,CAACV,KAAD,EAAQ,GAAGC,MAAX,CAAP;AAE/C,eAAO,EAAP;AACD;AACF,KA7BD;;AA+BA,UAAMG,MAAM,GAAGL,GAAG,CAACL,KAAD,EAAQ,IAAR,CAAH,CAAiBsB,MAAjB,CAAyBV,IAAD,IAAUA,IAAlC,CAAf;AAEAT,IAAAA,UAAU,CAACO,MAAD,CAAV;AAEA,WAAOA,MAAP;AACD,GAvCoB,EAwCrB,CAACV,KAAD,EAAQC,MAAM,CAACkB,QAAP,CAAgBH,IAAxB,CAxCqB,CAAvB;;AA2CA,QAAMO,QAAQ,GAAIX,IAAD,IAAUR,OAAO,CAACoB,IAAR,CAAcC,MAAD,IAAYb,IAAI,KAAKa,MAAlC,CAA3B;;AAEA,QAAMC,QAAQ,GAAInB,MAAD,IAAY;AAE3B,QAAI,CAACA,MAAL,EAAa,OAAO,IAAP;AAEb,WAAOL,OAAO,CAACsB,IAAR,CAAcZ,IAAD,IAAUA,IAAI,KAAKL,MAAhC,CAAP;AACD,GALD;;AAOA,QAAMoB,MAAM,GAAG,CAACf,IAAD,EAAO,GAAGgB,OAAV,KAAsB;AAEnC,UAAMC,OAAO,GAAG3B,OAAO,CAAC4B,SAAR,CAAmBC,CAAD,IAAOA,CAAC,KAAKnB,IAA/B,CAAhB;;AAEA,QAAIiB,OAAO,KAAK,CAAC,CAAjB,EAAoB;AAElB1B,MAAAA,UAAU,CAAC,CAAC,GAAGD,OAAO,CAAC8B,KAAR,CAAcH,OAAO,GAAG,CAAxB,CAAJ,CAAD,CAAV;AACD,KAHD,MAIK;AAEH1B,MAAAA,UAAU,CAAC,CAACS,IAAD,EAAO,GAAGgB,OAAV,CAAD,CAAV;AACD;AACF,GAZD;;AAcA,QAAMK,IAAI,GAAG,CAACjC,KAAD,EAA4BkC,KAAK,GAAG,CAApC,EAAuC,GAAGN,OAA1C,KAAsD;AACjE,WACE;AACE,MAAA,SAAS,EAAE9B,KAAK,CAACqC,OAAN,CAAc;AACvB,SAAC,eAAD,GAAmB,IADI;AAEvB,SAAE,wBAAuBD,KAAM,EAA/B,GAAmC,IAFZ;AAGvB,SAAC,0BAAD,GAA8B,CAACR,QAAQ,CAACE,OAAO,CAAC,CAAD,CAAR;AAHhB,OAAd,CADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOG5B,KAAK,CAACW,GAAN,CAAWC,IAAD,IACT;AACE,MAAA,GAAG,EAAEA,IAAI,CAACwB,KADZ;AAEE,MAAA,SAAS,EAAEtC,KAAK,CAACqC,OAAN,CAAc;AACvB,+BAAuB,IADA;AAEvB,uCAA+BZ,QAAQ,CAACX,IAAD;AAFhB,OAAd,CAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGA,IAAI,CAACE,KAAL,GAAa,MAAC,IAAD,eAAUF,IAAI,CAACE,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAuBF,IAAI,CAACwB,KAA5B,CAAb,GAAyD;AAAK,MAAA,OAAO,EAAE,MAAMT,MAAM,CAACf,IAAD,EAAO,GAAGgB,OAAV,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+ChB,IAAI,CAACwB,KAApD,CAD5D,CAPF,EAUGxB,IAAI,CAACZ,KAAL,IAAcY,IAAI,CAACZ,KAAL,CAAWa,MAAzB,IAAmCoB,IAAI,CAACrB,IAAI,CAACZ,KAAN,EAAakC,KAAK,GAAG,CAArB,EAAwBtB,IAAxB,EAA8B,GAAGgB,OAAjC,CAV1C,CADD,CAPH,CADF;AAwBD,GAzBD;;AA2BA,QAAMO,OAAO,GAAGrC,KAAK,CAACqC,OAAN,CAAc;AAC5B,eAAW;AADiB,GAAd,CAAhB;AAIA,SACE;AAAK,IAAA,SAAS,EAAEA,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIGF,IAAI,CAACjC,KAAD,CAJP,CADF;AAQD,CA/GM;;GAAMD,O;UAEIF,S;;;KAFJE,O","sourcesContent":["import React, { useMemo, useState } from 'react';\nimport { FrameworkSelector, Link, Text } from 'components';\nimport { useRouter } from 'hooks';\nimport { Utils } from 'utils';\nimport { SidebarItem, SidebarProps } from './sidebar.types';\n\nexport const Sidebar: React.FC<SidebarProps> = ({ items = [] }) => {\n\n  const router = useRouter();\n\n  const [current, setCurrent] = useState([]);\n\n  const actives = useMemo(\n    () => {\n\n      const run = (input, ...parent) => {\n\n        if (Array.isArray(input)) {\n\n          let result = [];\n\n          input.map((item) => {\n\n            const items = run(item, ...parent);\n\n            if (items.length) result = items;\n          });\n\n          return result;\n        }\n        else if (input.items) {\n\n          return run(input.items, input, ...parent);\n        }\n        else {\n\n          if (!input.route?.to) return [];\n\n          const path = router.path(input.route?.to, input.route?.params);\n\n          if (window.location.pathname.startsWith(path)) return [input, ...parent];\n\n          return [];\n        }\n      }\n\n      const result = run(items, null).filter((item) => item);\n\n      setCurrent(result);\n\n      return result;\n    },\n    [items, router.location.path]\n  );\n\n  const isActive = (item) => actives.some((active) => item === active);\n\n  const isExpand = (parent) => {\n\n    if (!parent) return true;\n\n    return current.some((item) => item === parent);\n  }\n\n  const toggle = (item, ...parents) => {\n\n    const indexOf = current.findIndex((x) => x === item);\n\n    if (indexOf !== -1) {\n\n      setCurrent([...current.slice(indexOf + 1)]);\n    }\n    else {\n\n      setCurrent([item, ...parents]);\n    }\n  }\n\n  const menu = (items: Array<SidebarItem>, level = 0, ...parents) => {\n    return (\n      <ul\n        className={Utils.classes({\n          ['sidebar__menu']: true,\n          [`sidebar__menu--level-${level}`]: true,\n          ['sidebar__menu--collapsed']: !isExpand(parents[0])\n        })}\n      >\n        {items.map((item) => (\n          <li\n            key={item.title}\n            className={Utils.classes({\n              'sidebar__menu__item': true,\n              'sidebar__menu__item--active': isActive(item)\n            })}\n          >\n            <Text size=\"body\">\n              {item.route ? <Link {...item.route}>{item.title}</Link> : <div onClick={() => toggle(item, ...parents)}>{item.title}</div>}\n            </Text>\n            {item.items && item.items.length && menu(item.items, level + 1, item, ...parents)}\n          </li>\n        ))}\n      </ul>\n    );\n  };\n\n  const classes = Utils.classes({\n    'sidebar': true,\n  });\n\n  return (\n    <div className={classes}>\n      <div className=\"framework-selector\">\n        <FrameworkSelector />\n      </div>\n      {menu(items)}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}